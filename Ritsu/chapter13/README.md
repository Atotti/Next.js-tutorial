# フォントと画像の最適化

## なぜフォントを最適化するのか？
カスタムフォントを使用すると、フォントファイルを新しくロードする必要がある場合にパフォーマンスに影響を与える可能性がある。


### CLS(Cumulative Lyaout Shift)
ページコンテンツにおける「視覚的な安定性を示す指標」。この評価は0~1の数値で表され、「0」は移動無し、「1」は移動量が最大であることを示す。


フォントの場合、ブラウザが最初にフォールバックフォント、またはシステムフォントでテキストをレンダリングし、読み込まれた後にカスタムフォントに置き換えるときに、レイアウトの移動が起こる。このとき、テキストのサイズ、間隔、レイアウトが変更され、ズレが生じる恐れがある。

Next.jsは、`next/font`モジュールを使用すると、アプリケーション内のフォント自動的に最適化する。ビルド時にフォントファイルをダウンロードし、ほかの静的アセットとともにホストすることで、ユーザーがアプリケーションにアクセスしたときに、パフォーマンスに影響を与えるようなフォントに対する追加のネットワークリクエストをなくすことができる。


### フォントフォールバック
ひとつのフォントに収録できるグリフの最大数は仕様上65536個であるが、対応するグリフが存在しない場合に他のフォントからグリフを持ってきて穴埋めする処理。


## アプリのベースとなるフォントを追加する
```
import { Inter } from 'next/font/google';
 
export const inter = Inter({ subsets: ['latin'] });
```
「Inter」の中にある「latin」を取り出してロードすることで容量が大きくなってしまうのを防いでいる...?

また、フォントを適用させる際にTailwindの「antialiased」クラスをbody要素に追加しておくと、文字を滑らかにしてくれる！


## なぜ画像を最適化するのか？
通常のHTMLでは、画像を追加したのち、以下のことを手動で行わないといけない。
- 画像が様々な画面サイズで表示されるかの確認。
- デバイス毎の画像サイズの指定。
- 画像読み込み時にレイアウトがズレるのを防ぐ。
- 遅延読み込み。
    - 表示されている画像だけを先に読み込むやつ。

Next.jsではこれらの動作を`next/image`コンポーネントにより自動的に最適化してくれる。

Next.jsは、画像などの静的アセットを最上位の`/public`フォルダに置くことで、アプリケーションで参照できる。

### `<Image>`コンポーネントの設定
HTMLの`<img>`みたいなかんじ。
- src : 表示させたい画像のリンクを指定
- width : 表示させる画像の幅
- height : 表示させる画像の高さ
- alt : 代替テキスト
width と height は画像のアスペクトにする。